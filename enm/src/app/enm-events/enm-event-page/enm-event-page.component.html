<div class="back-arrow">
  <p-button type="button" (click)="goBack()" icon="pi pi-arrow-left" styleClass="p-button-rounded p-button-lg p-button-text"></p-button>
</div>


<div *ngIf="enmEvent$ | async as enmEvent" class="container-sm d-flex flex-column justify-content-center align-items-center" style="margin-top: 10px">
  <h2 style="color: #123d75">Links</h2>
  <p-card header="" styleClass="text-center" class="event-details">
    <div *ngIf="enmEvent.isRecentlyListed" class="recently-listed-badge">
      <p-tag>
        Listed<span *ngIf="enmEvent.creationDateTime | listedHowLongAgo as listedTime">&nbsp;{{ listedTime }}</span>
      </p-tag>
    </div>
    <div *ngIf="enmEvent.canceled" class="recently-listed-badge tags">
      <p-tag [style]="{'background-color': '#829bb4'}">
        <span *ngIf="enmEvent.canceled">Canceled</span>
      </p-tag>
    </div>
    <ng-container *ngIf="enmEvent.venue.link && enmEvent.venue.link !== 'pending'; else venueName">
      <h1 class="card-text">
        <a href="{{ enmEvent.venue.link }}" target="_blank" rel="noopener noreferrer" class="m-0">{{ enmEvent.venue.name }}&nbsp;<i style="font-size: .5em;" class="pi pi-external-link"></i></a>
      </h1>
    </ng-container>
    <ng-template #venueName>
      <h1 class="card-text artist-name-non-clickable">{{ enmEvent.venue.name }}</h1>
    </ng-template>

    <div class="m-0 lh-lg artists artist-name">
      <ng-container *ngFor="let artist of enmEvent.artists; let i = index;">
        <ng-container *ngIf="artist.link && artist.link !== 'pending'; else artistName">
          <div class="artist-container">
            <a href="{{ artist.link }}" target="_blank" rel="noopener noreferrer">{{ artist.name }}
              <span *ngIf="(artist.location) && (artist.location != 'RGV')">
                <p-tag value="{{artist.location}}" [style]="{'font-size': '.4em', 'margin-bottom': '10px', 'position': 'relative', 'bottom': '10px', 'padding-left': '4px', 'padding-right': '4px', 'padding-top': '2px', 'padding-bottom': '2px', 'background-color': '#937fee'}"></p-tag>
                &nbsp;
              </span>
              <span *ngIf="artist.debut" class="tags">
                <p-tag value="DEBUT" [style]="{'font-size': '.4em', 'margin-bottom': '10px', 'position': 'relative', 'bottom': '10px', 'padding-left': '4px', 'padding-right': '4px', 'padding-top': '2px', 'padding-bottom': '2px', 'background-color': '#f8addf'}"></p-tag>
                &nbsp;
              </span>
              <i style="font-size: .6em;" class="pi pi-external-link"></i>
            </a>

          </div>
        </ng-container>
        <ng-template #artistName>
          <div class="artist-container">
            <span class="artist-name-non-clickable">{{ artist.name }}</span><span *ngIf="(artist.location) && (artist.location != 'RGV')">&nbsp;<p-tag value="{{artist.location}}" [style]="{'font-size': '.4em', 'margin-bottom': '10px', 'position': 'relative', 'bottom': '10px', 'padding-left': '4px', 'padding-right': '4px', 'padding-top': '2px', 'padding-bottom': '2px', 'background-color': '#937fee'}"></p-tag></span>
          </div>
          <span *ngIf="artist.debut" class="tags">
            <p-tag value="DEBUT" [style]="{'font-size': '.4em', 'margin-bottom': '10px', 'position': 'relative', 'bottom': '10px', 'padding-left': '4px', 'padding-right': '4px', 'padding-top': '2px', 'padding-bottom': '2px', 'background-color': '#f8addf'}"></p-tag>
          </span>
        </ng-template>
        <!-- Add separator for all but the last artist -->
        <span *ngIf="i < enmEvent.artists.length - 1">&nbsp;&nbsp;&nbsp; &middot; &nbsp;&nbsp;&nbsp;</span>
      </ng-container>
    </div>

    <!-- <div class="artist-container">
      <span class="artist-name">{{ artist.name }}</span>&nbsp;&nbsp;
      <span *ngIf="(artist.location) && (artist.location != 'RGV')">
        <p-tag value="{{artist.location}}" [style]="{'font-size': '.4em', 'margin-bottom': '10px', 'position': 'relative', 'bottom': '10px', 'padding-left': '4px', 'padding-right': '4px', 'padding-top': '2px', 'padding-bottom': '2px', 'background-color': '#937fee'}"></p-tag>&nbsp;&nbsp;
      </span>
    </div> -->

    <div *ngIf="enmEvent.promoter">
      <div class="custom-divider">
        <hr style="width: 40px;">
      </div>
      <ng-container *ngIf="enmEvent.promoter.link && enmEvent.promoter.link !== 'pending'; else promoterName">
        <h6 class="card-text promoter">
          <a href="{{ enmEvent.promoter.link }}" target="_blank" rel="noopener noreferrer" class="m-0 promoter">{{ enmEvent.promoter.name }}&nbsp;<i style="font-size: .6em;" class="pi pi-external-link"></i></a>
        </h6>
      </ng-container>
      <ng-template #promoterName>
        <h6 class="card-text artist-name-non-clickable promoter">{{ enmEvent.promoter.name }}</h6>
      </ng-template>
    </div>
    <br>
    <!-- This will only show if the user is on a mobile device -->
    <div *ngIf="isMobile">
      <div class="click-to-copy clickable-address">
        <span class="flex align-items-center gap-2" >
          <div class="font-semibold" style="display: inline-block" (click)="copyAddress($event)">
            <!-- this condition checks that a time was provided. it displays it if yes-->
            <span *ngIf="enmEvent.doorTime" class="doortime">doors {{ enmEvent.doorTime | doorTimeToTime }} </span>
            <span *ngIf="(enmEvent.dateTime | date:'HH:mm') != '23:59'" class="datetime">{{ enmEvent.dateTime | dateTimeToTime }} &middot; </span>
            <span class="datetime">{{ enmEvent.dateTime | dateTimeToWordifiedMonth }} {{ enmEvent.dateTime | dateTimeToDay }} </span>
            <!-- synonyms -->
            <span *ngIf="enmEvent.priceOfEntry >= 0">&middot; {{ enmEvent.priceOfEntry | wordifiedCover }}</span>
            <span *ngIf="enmEvent.cover !== null && enmEvent.cover >= 0">&middot; {{ enmEvent.cover | wordifiedCover }}</span>
            <!-- synonyms, address --> <br>
            <span #addressText class="card-text clickable-address address-text" *ngIf="enmEvent.address && enmEvent.city">{{ enmEvent.address }}, {{ enmEvent.city }}</span>
            <span #venueAddressText class="card-text clickable-address venue-address-text" *ngIf="enmEvent.venue">{{ enmEvent.venue.address }}, {{ enmEvent.venue.city }} &nbsp;<i class="pi pi-copy" style="font-size: .8rem"></i></span>
            <!---->
          </div>
        </span>
      </div>
    </div>

    <!-- This will only show if the user is NOT on a mobile device -->
    <div *ngIf="!isMobile">
      <div class="click-to-copy clickable-address">
        <span class="flex align-items-center gap-2" >
          <div class="font-semibold" style="display: inline-block" (click)="copyAddress($event)" pTooltip="Click To Copy Address" tooltipPosition="bottom">
            <!-- this condition checks that a time was provided. it displays it if yes-->
            <span *ngIf="enmEvent.doorTime" class="doortime">doors {{ enmEvent.doorTime | doorTimeToTime }} </span>
            <span *ngIf="(enmEvent.dateTime | date:'HH:mm') != '23:59'" class="datetime">{{ enmEvent.dateTime | dateTimeToTime }} &middot; </span>
            <span class="datetime">{{ enmEvent.dateTime | dateTimeToWordifiedMonth }} {{ enmEvent.dateTime | dateTimeToDay }} </span>
            <!-- synonyms -->
            <span *ngIf="enmEvent.priceOfEntry >= 0">&middot; {{ enmEvent.priceOfEntry | wordifiedCover }}</span>
            <span *ngIf="enmEvent.cover >= 0">&middot; {{ enmEvent.cover | wordifiedCover }}</span>
            <!-- synonyms, address --> <br>
            <span #addressText class="card-text clickable-address address-text" *ngIf="enmEvent.address && enmEvent.city">{{ enmEvent.address }}, {{ enmEvent.city }}</span>
            <span #venueAddressText class="card-text clickable-address venue-address-text" *ngIf="enmEvent.venue">{{ enmEvent.venue.address }}, {{ enmEvent.venue.city }} &nbsp;<i class="pi pi-copy" style="font-size: .8rem"></i></span>
            <!---->
          </div>
        </span>
      </div>
    </div>
  </p-card>
  <div class="disclaimer-section">
    <div class="disclaimer d-flex justify-content-center align-items-center">* Start time might vary</div>  
  </div>
</div>
